"use strict";(function(){"use strict";function a(a){let b=a.currentTarget;isNaN(b.value.replace(/,/g,""))||(b.value=b.value.replace(/,/g,""))}function b(a){a.currentTarget.parentElement.remove()}function c(a){let d=a.currentTarget,e=d.parentElement.cloneNode(!0);const f=d.parentElement;f.parentNode.insertBefore(e,f.nextSibling);let g=e.querySelectorAll(".input-add");g.forEach(a=>{a.addEventListener("click",c)});let h=e.querySelectorAll("input");h.forEach(a=>{a.value=""}),d.classList.remove("input-add"),d.classList.add("input-delete"),d.innerHTML="Delete",d.removeEventListener("click",c),d.addEventListener("click",b)}function d(c){let d=c.currentTarget,e=d.dataset.row,g=[];if(e&&(g=document.querySelectorAll("."+e)),0<g.length){let c=g[g.length-1];const d=c.parentNode;let e=c.cloneNode(!0);d.insertBefore(e,c.nextSibling);let h=e.querySelectorAll("input");h.forEach(a=>{a.value=""});let i=e.querySelectorAll(".input-delete");i.forEach(a=>{a.addEventListener("click",a=>{b(a),f()})});let j=e.querySelectorAll("input[inputmode=\"numeric\"]");j.forEach(b=>{b.addEventListener("input",a),b.addEventListener("change",f)})}}function f(){let a=document.querySelectorAll(".affordability-input-group"),b=document.querySelectorAll("input[name=\"housing_unit_count\"]"),c=document.querySelectorAll("input[name=\"housing_unit_percent\"]"),d=document.querySelectorAll("input[name=\"housing_rent\"]"),e=document.getElementById("affordability-income-needed"),f=document.getElementById("affordability-total-units"),g=document.getElementById("affordability-weighted-rent"),h=0;b.forEach(a=>{let b=a.value?parseInt(a.value):0;h+=b}),f.textContent=h.toString();for(var j=0;j<a.length;j++)if(1==a.length)c[j].value="100%";else{let a=b[j].value?parseInt(b[j].value):0,d=parseInt(100*(a/h));c[j].value=d+"%"}let k=0;for(var j=0;j<a.length;j++){let c=d[j].value?parseInt(d[j].value):0;if(1==a.length)k=c;else{let a=b[j].value?parseInt(b[j].value):0,d=parseFloat(a/h);k+=d*c}}k=parseFloat(k),g.textContent="$"+k.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});let l=parseFloat(12*k/.3).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});e.textContent="$"+l}let g=document.querySelectorAll("input[inputmode=\"numeric\"]");g.forEach(b=>{b.addEventListener("input",a)});let h=document.querySelectorAll(".input-delete");h.forEach(a=>{a.addEventListener("click",b)});let i=document.querySelectorAll(".input-add");i.forEach(a=>{a.addEventListener("click",c)});let j=document.querySelectorAll(".button--add");j.forEach(a=>{a.addEventListener("click",d)});let k=document.querySelectorAll(".affordability-input-group input[inputmode=\"numeric\"]");k.forEach(a=>{a.addEventListener("change",f)}),window.addEventListener("load",f)})();