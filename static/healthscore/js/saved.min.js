"use strict";(function(a){"use strict";const b=document.querySelectorAll(".button--edit");b.forEach(a=>{a.addEventListener("click",function(){a.classList.add("loading"),a.textContent="Loading...",a.setAttribute("disabled","")})});let c=document.querySelectorAll(".scorecard__title");c.forEach(b=>{let c=b.querySelector("span"),d=b.parentElement.querySelector("form"),f=d.querySelector(".form-submit"),g=d.querySelector(".form-cancel"),h=null,i=document.createElement("button");i.setAttribute("type","button"),i.textContent="Edit title",i.classList.add("button-link"),i.addEventListener("click",function(){d.classList.remove("is-hidden"),b.classList.add("is-hidden")}),g.addEventListener("click",function(){d.classList.add("is-hidden"),b.classList.remove("is-hidden"),h&&(h.abort(),f.classList.remove("loading"),f.removeAttribute("disabled",""))}),f.addEventListener("click",function(g){g.preventDefault(),f.classList.add("loading"),f.setAttribute("disabled","");let e=d.querySelector("input[name=\"title\"]").value,i=a(d).serialize();h=a.ajax({url:"/save_title",type:"POST",data:i,success:function(){f.classList.remove("loading"),f.removeAttribute("disabled",""),c.innerText=e,d.classList.add("is-hidden"),b.classList.remove("is-hidden")},error:function(){alert("Save failed. Please check logs."),f.classList.remove("loading"),f.removeAttribute("disabled","")}})}),b.appendChild(i)})})(jQuery);